import Phaser from 'phaser'
import { Plugin as ActorPlugin } from '@eriengine/plugin-actor'
import { Plugin as IsometricScenePlugin } from '@eriengine/plugin-isometric-scene'
import { PointerPlugin as IsometricCursorPlugin, SelectPlugin as IsometricSelectPlugin } from '@eriengine/plugin-isometric-cursor'
import { Plugin as FogOfWarPlugin } from '@eriengine/plugin-fog-of-war'
import { Plugin as DialoguePlugin } from '@eriengine/plugin-dialogue'

import Scenes from './{{ PROJECT_SRC_SCENELIST_NAME }}'
import config from '../extend/package.json'


new Phaser.Game({
    width: config.gameDisplaySize[0],
    height: config.gameDisplaySize[1],
    scene: [
        ...Object.values(Scenes).map((scene) => scene.default).sort((a, b): number => a.Depth - b.Depth)
    ],
    scale: {
        parent: '#canvas-wrapper',
        expandParent: true,
        zoom: 1,
        mode: Phaser.Scale.ScaleModes.FIT,
        autoCenter: Phaser.Scale.CENTER_BOTH
    },
    dom: {
        createContainer: true
    },
    plugins: {
        global: [
            {
                key: 'DialoguePlugin',
                mapping: 'dialogue',
                plugin: DialoguePlugin
            }
        ]
    },
    physics: {
        default: 'matter',
        matter: {
            debug: false,
            gravity: {
                x: 0,
                y: 0
            }
        }
    }
})